#!/bin/sh

# ts provides a simple wrapper around tmux named sessions.

if [ $# -eq 1 ]; then
  if [ -z "$TMUX" ]; then
    tmux attach -t $1 2>/dev/null || tmux new-session -s $1
  else
    TMUX= command tmux new-session -s $1 -d 2>/dev/null
    command tmux switch-client -t $1
  fi
else
  echo "ts - create or attach to the specified tmux session"
  echo "Usage: ts <session-name>"
  echo ""

  tmux has-session 2>/dev/null
  if [ "$?" -eq "0" ]; then
    echo "Active sessions:"
    tmux list-sessions | awk '{ print "  "$0 }'
  else
    echo "No active sessions."
  fi
fi
