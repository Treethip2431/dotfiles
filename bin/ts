#!/bin/sh

# ts provides a simple wrapper around tmux named sessions.

if [ $# -eq 1 ]; then
  if [ -z "$TMUX" ]; then
    # attach to named session or create if it doesn't exist
    tmux new-session -A -s $1
  else
    # already in a tmux session. create new session if it
    # doesn't exist, then switch to it
    TMUX= command tmux new-session -s $1 -d 2>/dev/null
    command tmux switch-client -t $1
  fi
else
  echo "ts - create or attach to the specified tmux session"
  echo "Usage: ts <session-name>"
  echo ""

  # list active seesions if there are any
  tmux has-session 2>/dev/null
  if [ "$?" -eq "0" ]; then
    echo "Active sessions:"
    tmux list-sessions | awk '{ print "  "$0 }'
  else
    echo "No active sessions."
  fi
fi
